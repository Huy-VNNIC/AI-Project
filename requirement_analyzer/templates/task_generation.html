<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Task Generation - Software Requirements to User Stories</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="stylesheet" href="/static/css/task-generation.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-gradient-primary">
        <div class="container-fluid">
            <a class="navbar-brand" href="/">
                <i class="bi bi-robot"></i> AI Task Generator
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/">
                            <i class="bi bi-calculator"></i> Effort Estimation
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="/task-generation">
                            <i class="bi bi-list-check"></i> Task Generation
                        </a>
                    </li>
                    <li class="nav-item">
                        <span class="badge bg-success ms-2 mt-2">Model Mode</span>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="container-fluid mt-4">
        <div class="row">
            <!-- Left Panel - Input -->
            <div class="col-lg-5">
                <div class="card shadow-sm mb-4">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">
                            <i class="bi bi-file-earmark-text"></i> Requirements Input
                        </h5>
                    </div>
                    <div class="card-body">
                        <!-- Input Tabs -->
                        <ul class="nav nav-pills mb-3" id="input-tabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="text-input-tab" data-bs-toggle="pill" data-bs-target="#text-input" type="button">
                                    <i class="bi bi-keyboard"></i> Text
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="file-input-tab" data-bs-toggle="pill" data-bs-target="#file-input" type="button">
                                    <i class="bi bi-file-upload"></i> File
                                </button>
                            </li>
                        </ul>

                        <div class="tab-content" id="input-tab-content">
                            <!-- Text Input -->
                            <div class="tab-pane fade show active" id="text-input">
                                <form id="taskGenerationForm">
                                    <div class="mb-3">
                                        <label for="requirementsText" class="form-label">
                                            Requirements Document
                                            <small class="text-muted">(one requirement per line)</small>
                                        </label>
                                        <textarea 
                                            class="form-control font-monospace" 
                                            id="requirementsText" 
                                            rows="12" 
                                            placeholder="Example:
The system shall allow users to login with email and password.
The application must send verification emails upon registration.
Users should be able to reset their password via email link.
The system shall support two-factor authentication.
The platform must encrypt all sensitive user data at rest."></textarea>
                                        <div class="form-text">
                                            <i class="bi bi-info-circle"></i> 
                                            Each line should contain one requirement statement
                                        </div>
                                    </div>

                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label for="maxTasks" class="form-label">Max Tasks</label>
                                            <input type="number" class="form-control" id="maxTasks" value="50" min="1" max="200">
                                        </div>
                                        <div class="col-md-6">
                                            <label for="threshold" class="form-label">Detection Threshold</label>
                                            <input type="number" class="form-control" id="threshold" value="0.5" min="0.1" max="1.0" step="0.1">
                                        </div>
                                    </div>

                                    <div class="d-grid gap-2">
                                        <button type="submit" class="btn btn-primary btn-lg" id="generateBtn">
                                            <i class="bi bi-magic"></i> Generate Tasks
                                        </button>
                                    </div>
                                </form>
                            </div>

                            <!-- File Input -->
                            <div class="tab-pane fade" id="file-input">
                                <div class="mb-3">
                                    <label for="fileUpload" class="form-label">Upload Requirements Document</label>
                                    <input class="form-control" type="file" id="fileUpload" accept=".txt,.md,.docx,.pdf">
                                    <div class="form-text">
                                        Supported formats: TXT, MD, DOCX, PDF
                                    </div>
                                </div>
                                <div class="d-grid gap-2">
                                    <button type="button" class="btn btn-primary btn-lg" id="uploadGenerateBtn">
                                        <i class="bi bi-cloud-upload"></i> Upload & Generate
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Generation Stats -->
                        <div class="card mt-3 bg-light" id="statsCard" style="display: none;">
                            <div class="card-body">
                                <h6 class="card-title">Generation Statistics</h6>
                                <div class="row text-center">
                                    <div class="col-4">
                                        <div class="stat-value" id="statTotal">0</div>
                                        <div class="stat-label">Requirements</div>
                                    </div>
                                    <div class="col-4">
                                        <div class="stat-value text-success" id="statGenerated">0</div>
                                        <div class="stat-label">Generated</div>
                                    </div>
                                    <div class="col-4">
                                        <div class="stat-value text-info" id="statFiltered">0</div>
                                        <div class="stat-label">Filtered</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Examples -->
                <div class="card shadow-sm">
                    <div class="card-header bg-secondary text-white">
                        <h6 class="mb-0">
                            <i class="bi bi-lightbulb"></i> Quick Examples
                        </h6>
                    </div>
                    <div class="card-body">
                        <div class="d-grid gap-2">
                            <button class="btn btn-outline-secondary btn-sm" onclick="loadExample('ecommerce')">
                                <i class="bi bi-cart"></i> E-commerce System
                            </button>
                            <button class="btn btn-outline-secondary btn-sm" onclick="loadExample('auth')">
                                <i class="bi bi-shield-lock"></i> Authentication Module
                            </button>
                            <button class="btn btn-outline-secondary btn-sm" onclick="loadExample('healthcare')">
                                <i class="bi bi-heart-pulse"></i> Healthcare App
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Panel - Output -->
            <div class="col-lg-7">
                <!-- Loading State -->
                <div id="loadingState" class="text-center py-5" style="display: none;">
                    <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    <p class="mt-3 text-muted">Generating tasks with AI models...</p>
                    <small class="text-muted">This may take a few seconds</small>
                </div>

                <!-- Empty State -->
                <div id="emptyState" class="text-center py-5">
                    <i class="bi bi-inbox display-1 text-muted"></i>
                    <h4 class="mt-3 text-muted">No tasks generated yet</h4>
                    <p class="text-muted">Enter requirements and click "Generate Tasks" to start</p>
                </div>

                <!-- Results Container -->
                <div id="resultsContainer" style="display: none;">
                    <!-- Summary Card -->
                    <div class="card shadow-sm mb-3">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <h5 class="mb-1">Generated Tasks</h5>
                                    <small class="text-muted">
                                        <span id="taskCount">0</span> tasks â€¢ 
                                        Processing time: <span id="processingTime">0</span>s
                                    </small>
                                </div>
                                <div>
                                    <button class="btn btn-outline-primary btn-sm me-2" onclick="exportTasks('json')">
                                        <i class="bi bi-download"></i> JSON
                                    </button>
                                    <button class="btn btn-outline-success btn-sm" onclick="exportTasks('csv')">
                                        <i class="bi bi-file-earmark-spreadsheet"></i> CSV
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Filters -->
                    <div class="card shadow-sm mb-3">
                        <div class="card-body py-2">
                            <div class="row align-items-center">
                                <div class="col-auto">
                                    <small class="text-muted">Filter:</small>
                                </div>
                                <div class="col">
                                    <div class="btn-group btn-group-sm" role="group">
                                        <input type="radio" class="btn-check" name="filterType" id="filterAll" value="all" checked>
                                        <label class="btn btn-outline-secondary" for="filterAll">All</label>

                                        <input type="radio" class="btn-check" name="filterType" id="filterFunctional" value="functional">
                                        <label class="btn btn-outline-secondary" for="filterFunctional">Functional</label>

                                        <input type="radio" class="btn-check" name="filterType" id="filterSecurity" value="security">
                                        <label class="btn btn-outline-secondary" for="filterSecurity">Security</label>

                                        <input type="radio" class="btn-check" name="filterType" id="filterPerformance" value="performance">
                                        <label class="btn btn-outline-secondary" for="filterPerformance">Performance</label>

                                        <input type="radio" class="btn-check" name="filterType" id="filterInterface" value="interface">
                                        <label class="btn btn-outline-secondary" for="filterInterface">Interface</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tasks List -->
                    <div id="tasksList"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Task Detail Modal -->
    <div class="modal fade" id="taskDetailModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalTaskTitle">Task Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="modalTaskBody">
                    <!-- Task details will be injected here -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" onclick="copyTaskToClipboard()">
                        <i class="bi bi-clipboard"></i> Copy to Clipboard
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/static/js/task-generation.js"></script>
</body>
</html>
